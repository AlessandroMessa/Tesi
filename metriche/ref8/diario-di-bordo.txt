 Refactoring degli Architectural Smells: Cyclic Dependencies
ğŸ“Œ Contesto
Durante lâ€™analisi architetturale del progetto RuoYi-Cloud tramite Arcan, sono stati rilevati inizialmente 5 casi di Cyclic Dependency, distribuiti tra package e classi. Questo tipo di architectural smell mina la modularitÃ  del sistema, aumenta il coupling e riduce la manutenibilitÃ  del codice.

ğŸ¯ Obiettivo
Lâ€™obiettivo Ã¨ stato quello di:

Rimuovere i cicli tra moduli/pacchetti/classi.

Ridurre lâ€™accoppiamento bidirezionale.

Migliorare lâ€™instabilitÃ  dei moduli, con il potenziale effetto di ridurre anche gli Unstable Dependencies (smell dipendenti).

âœ… Primo intervento: com.ruoyi.common.sensitive.config â†” com.ruoyi.common.sensitive.annotation
Il primo ciclo scelto per il refactoring coinvolgeva due componenti:

Lâ€™annotazione @Sensitive nel package annotation

Il serializzatore SensitiveJsonSerializer nel package config

ğŸ” Problema
Entrambe le classi si referenziavano a vicenda:

Lâ€™annotazione usava @JsonSerialize(using = SensitiveJsonSerializer.class)

Il serializzatore leggeva lâ€™annotazione tramite property.getAnnotation(Sensitive.class)

ğŸ”¨ Soluzione applicata
Ãˆ stato applicato un refactoring in stile Dependency Inversion:

Ãˆ stata introdotta una nuova utility di risoluzione riflessiva:

java
Copia
Modifica
SensitiveAnnotationResolver
collocata in un package intermedio (util), che ha isolato la riflessione sullâ€™annotazione.

SensitiveJsonSerializer ora dipende da SensitiveAnnotationResolver e non piÃ¹ direttamente dallâ€™annotazione @Sensitive.

âœ… Il ciclo Ã¨ stato cosÃ¬ spezzato con successo.

ğŸ“‰ Risultato ottenuto
Dopo il refactoring, lâ€™analisi Arcan ha mostrato una riduzione dei cicli da 5 a 3.

Questo dimostra che la rimozione di un ciclo centrale puÃ² portare anche alla rimozione indiretta di altri cicli, migliorando la qualitÃ  architetturale complessiva.